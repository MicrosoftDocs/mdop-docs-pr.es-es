---
title: Cómo configurar una memoria caché de solo lectura en el cliente App-V (VDI)
description: Cómo configurar una memoria caché de solo lectura en el cliente App-V (VDI)
author: dansimp
ms.assetid: 7a41e017-9e23-4a6a-a659-04d23f008b83
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 08/30/2016
ms.openlocfilehash: 114f9dfbf55a3f62b6bc8bec6b37a659ffbfaf56
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/26/2020
ms.locfileid: "10817941"
---
# <span data-ttu-id="03e54-103">Cómo configurar una memoria caché de solo lectura en el cliente App-V (VDI)</span><span class="sxs-lookup"><span data-stu-id="03e54-103">How to Configure a Read-only Cache on the App-V Client (VDI)</span></span>


<span data-ttu-id="03e54-104">En Microsoft Application Virtualization (App-V) 4,6 el cliente admite el uso de una caché de solo lectura compartida.</span><span class="sxs-lookup"><span data-stu-id="03e54-104">In Microsoft Application Virtualization (App-V) 4.6 the Client supports using a shared read-only cache.</span></span> <span data-ttu-id="03e54-105">La caché de solo lectura compartida permite al cliente usar el espacio de disco de forma eficaz en un sistema de infraestructura de escritorio virtual (VDI), donde los usuarios ejecutan aplicaciones en máquinas virtuales (VM) hospedadas en un entorno de servidor del centro de datos y compartir almacenamiento de red en una red de área de almacenamiento (SAN).</span><span class="sxs-lookup"><span data-stu-id="03e54-105">The shared read-only cache enables the Client to use disk space efficiently in a Virtual Desktop Infrastructure (VDI) system, where users run applications on Virtual Machines (VM) that are hosted in a data center server environment and share network storage on a Storage Area Network (SAN).</span></span> <span data-ttu-id="03e54-106">Los procedimientos siguientes proporcionan una descripción general del proceso necesario para implementar el cliente de App-V en cualquiera de las arquitecturas VDI principales, conocidas como "VM agrupada" o "VM estática".</span><span class="sxs-lookup"><span data-stu-id="03e54-106">The following procedures provide an overview of the process that is required to implement the App-V Client in either of the primary VDI architectures, known as “Pooled VM” or “Static VM”.</span></span> <span data-ttu-id="03e54-107">Se supone que está familiarizado con la planificación, la implementación y el funcionamiento del sistema App-V y sus componentes, así como el funcionamiento y la administración del servidor VDI.</span><span class="sxs-lookup"><span data-stu-id="03e54-107">It is assumed that you are familiar with the planning, deployment, and operation of the App-V system and its components, and also the operation and management of the VDI server.</span></span> <span data-ttu-id="03e54-108">Para obtener más información sobre App-V, consulte [Application Virtualization](https://go.microsoft.com/fwlink/?LinkId=122939) (https://go.microsoft.com/fwlink/?LinkId=122939)</span><span class="sxs-lookup"><span data-stu-id="03e54-108">For more information about App-V, see [Application Virtualization](https://go.microsoft.com/fwlink/?LinkId=122939) (https://go.microsoft.com/fwlink/?LinkId=122939)</span></span>

<span data-ttu-id="03e54-109">**Nota:**  Los detalles descritos en estos procedimientos están pensados únicamente como ejemplos.</span><span class="sxs-lookup"><span data-stu-id="03e54-109">**Note** The details outlined in these procedures are intended as examples only.</span></span> <span data-ttu-id="03e54-110">Puede usar diferentes métodos para completar el proceso general.</span><span class="sxs-lookup"><span data-stu-id="03e54-110">You might use different methods to complete the overall process.</span></span>

 

## <span data-ttu-id="03e54-111">Implementar el cliente de App-V en un escenario de VDI</span><span class="sxs-lookup"><span data-stu-id="03e54-111">Deploying the App-V Client in a VDI Scenario</span></span>


<span data-ttu-id="03e54-112">Puede implementar el cliente de App-V en un escenario de VDI usando una caché de solo lectura compartida que se ha rellenado con todas las aplicaciones necesarias para todos los usuarios.</span><span class="sxs-lookup"><span data-stu-id="03e54-112">You can deploy the App-V Client in a VDI scenario by using a shared read-only cache that has been populated with all the applications required for all users.</span></span> <span data-ttu-id="03e54-113">Después, configure la imagen VM maestra de VDI para que todos los clientes de App-V usen el mismo archivo de caché.</span><span class="sxs-lookup"><span data-stu-id="03e54-113">You then configure the VDI Master VM Image so that all the App-V Clients use the same cache file.</span></span> <span data-ttu-id="03e54-114">A los usuarios se les concede acceso a aplicaciones específicas mediante el proceso de publicación de App-V.</span><span class="sxs-lookup"><span data-stu-id="03e54-114">Users are granted access to specific applications by using the App-V publishing process.</span></span> <span data-ttu-id="03e54-115">Puesto que la memoria caché ya está cargada previamente con todas las aplicaciones, no se produce ninguna transmisión por secuencias cuando un usuario inicia una aplicación.</span><span class="sxs-lookup"><span data-stu-id="03e54-115">Since the cache is already preloaded with all applications, no streaming occurs when a user starts an application.</span></span> <span data-ttu-id="03e54-116">Sin embargo, los paquetes que se usan para rellenar previamente la memoria caché deben colocarse en un servidor de App-V que admita la transmisión por secuencias RTSP (Protocolo de transmisión en tiempo real) y que conceda permisos de acceso a los clientes de App-V.</span><span class="sxs-lookup"><span data-stu-id="03e54-116">However, the packages used to prepopulate the cache must be put on an App-V server that supports Real Time Streaming Protocol (RTSP) streaming and that grants access permissions to the App-V Clients.</span></span> <span data-ttu-id="03e54-117">Si publica las aplicaciones con un servidor de administración de App-V, puede usarla para proporcionar esta función de transmisión por secuencias.</span><span class="sxs-lookup"><span data-stu-id="03e54-117">If you publish the applications by using an App-V Management Server, you can use it to provide this streaming function.</span></span>

<span data-ttu-id="03e54-118">El proceso de implementación consta de cuatro tareas principales:</span><span class="sxs-lookup"><span data-stu-id="03e54-118">The deployment process consists of four primary tasks:</span></span>

-   <span data-ttu-id="03e54-119">Crear y rellenar el archivo de caché compartida Master</span><span class="sxs-lookup"><span data-stu-id="03e54-119">Creating and populating the master shared cache file</span></span>

-   <span data-ttu-id="03e54-120">Copiar el archivo de caché compartido en el almacenamiento del servidor VDI</span><span class="sxs-lookup"><span data-stu-id="03e54-120">Copying the shared cache file to the VDI server storage</span></span>

-   <span data-ttu-id="03e54-121">Configuración del software cliente de App-V en la imagen maestra de VDI</span><span class="sxs-lookup"><span data-stu-id="03e54-121">Configuring the App-V client software on the VDI Master Image</span></span>

-   <span data-ttu-id="03e54-122">Administrar el ciclo de implementación de actualizaciones para el archivo de caché compartido después de la implementación inicial</span><span class="sxs-lookup"><span data-stu-id="03e54-122">Managing the update deployment cycle for the shared cache file after the initial deployment</span></span>

<span data-ttu-id="03e54-123">Estas tareas requieren un planeamiento cuidadoso.</span><span class="sxs-lookup"><span data-stu-id="03e54-123">These tasks require careful planning.</span></span> <span data-ttu-id="03e54-124">Le recomendamos que prepare y documente un proceso metódico reproducible para que su organización siga.</span><span class="sxs-lookup"><span data-stu-id="03e54-124">We recommend that you prepare and document a methodical, reproducible process for your organization to follow.</span></span> <span data-ttu-id="03e54-125">Esto es especialmente importante para la preparación inicial y la implementación del archivo de caché compartido maestro, y para la administración continuada de actualizaciones de la aplicación, cada una de las cuales requiere una actualización de la caché compartida maestra.</span><span class="sxs-lookup"><span data-stu-id="03e54-125">This is especially important for the initial preparation and deployment of the master shared cache file, and for the on-going management of application updates, each of which require an update to the master shared cache.</span></span> <span data-ttu-id="03e54-126">Use los procedimientos siguientes para completar estas tareas principales.</span><span class="sxs-lookup"><span data-stu-id="03e54-126">Use the following procedures to complete these primary tasks.</span></span>

<span data-ttu-id="03e54-127">**Nota:**  Aunque puede publicar las aplicaciones con varios métodos diferentes, los procedimientos siguientes se basan en el uso de un servidor de administración de App-V para publicar.</span><span class="sxs-lookup"><span data-stu-id="03e54-127">**Note** Although you can publish the applications by using several different methods, the following procedures are based on the use of an App-V Management Server for publishing.</span></span>

 

**<span data-ttu-id="03e54-128">Para configurar la caché de solo lectura para la implementación inicial en un escenario de VDI agrupada de VM o de VM estática</span><span class="sxs-lookup"><span data-stu-id="03e54-128">To configure the read-only cache for initial deployment in a Pooled VM VDI or Static VM VDI scenario</span></span>**

1. <span data-ttu-id="03e54-129">Configure y configure un servidor de administración de App-V en una VM en el servidor VDI para proporcionar la autenticación de usuarios y la compatibilidad de publicación.</span><span class="sxs-lookup"><span data-stu-id="03e54-129">Set up and configure an App-V Management Server in a VM on the VDI server to provide user authentication and publishing support.</span></span>

2. <span data-ttu-id="03e54-130">Rellene la carpeta de contenido de este servidor de administración con todos los paquetes de aplicaciones necesarios para todos los usuarios.</span><span class="sxs-lookup"><span data-stu-id="03e54-130">Populate the Content folder of this Management Server with all the application packages required for all users.</span></span>

3. <span data-ttu-id="03e54-131">Configure un equipo de ensayo que tenga instalado el cliente de App-V.</span><span class="sxs-lookup"><span data-stu-id="03e54-131">Set up a staging computer that has the App-V Client installed.</span></span> <span data-ttu-id="03e54-132">Inicie sesión en el equipo de ensayo con una cuenta que tenga acceso a todas las aplicaciones, de modo que el conjunto completo de aplicaciones se publique en el equipo y, a continuación, transmita las aplicaciones a la memoria caché para que se carguen por completo.</span><span class="sxs-lookup"><span data-stu-id="03e54-132">Log on to the staging computer with an account that has access to all applications so that the complete set of applications are published to the computer, and then stream the applications to cache so that they are fully loaded.</span></span>

   **<span data-ttu-id="03e54-133">Importante</span><span class="sxs-lookup"><span data-stu-id="03e54-133">Important</span></span>**  
   <span data-ttu-id="03e54-134">El equipo de almacenamiento provisional debe usar el mismo tipo de sistema operativo y la misma arquitectura de sistema que usan las máquinas virtuales en las que se ejecutará el cliente de App-V.</span><span class="sxs-lookup"><span data-stu-id="03e54-134">The staging computer must use the same operating system type and system architecture as those used by the VMs on which the App-V Client will run.</span></span>

     

4. <span data-ttu-id="03e54-135">Reinicie el equipo de ensayo en modo seguro para asegurarse de que los drivers no se hayan iniciado, lo cual bloqueará el archivo de la caché.</span><span class="sxs-lookup"><span data-stu-id="03e54-135">Restart the staging computer in Safe Mode to ensure the drivers are not started, which would lock the cache file.</span></span>

   **<span data-ttu-id="03e54-136">Nota</span><span class="sxs-lookup"><span data-stu-id="03e54-136">Note</span></span>**  
   <span data-ttu-id="03e54-137">Como alternativa, puede detener y deshabilitar el servicio de virtualización de aplicaciones y, a continuación, reiniciar el equipo.</span><span class="sxs-lookup"><span data-stu-id="03e54-137">Alternatively, you can stop and disable the Application Virtualization service, and then restart the computer.</span></span> <span data-ttu-id="03e54-138">Una vez que se haya copiado el archivo, recuerde habilitar e iniciar el servicio.</span><span class="sxs-lookup"><span data-stu-id="03e54-138">After the file has been copied, remember to enable and start the service again.</span></span>

     

5. <span data-ttu-id="03e54-139">Copie el archivo de la caché Sftfs. FSD en la red SAN del servidor VDI, donde todas las VM pueden tener acceso a ella, como en una carpeta compartida.</span><span class="sxs-lookup"><span data-stu-id="03e54-139">Copy the Sftfs.fsd cache file to the VDI server’s SAN where all the VMs can access it, such as in a shared folder.</span></span> <span data-ttu-id="03e54-140">Establezca los permisos de acceso de la carpeta en solo lectura para el grupo todos y en control total para los administradores que administrarán las actualizaciones de archivos de caché.</span><span class="sxs-lookup"><span data-stu-id="03e54-140">Set the folder access permissions to Read-only for the group Everyone and to Full Control for administrators who will manage the cache file updates.</span></span> <span data-ttu-id="03e54-141">La ubicación del archivo de la caché se puede obtener en el registro del AppFS\\FileName.</span><span class="sxs-lookup"><span data-stu-id="03e54-141">The location of the cache file can be obtained from the registry AppFS\\FileName.</span></span>

   **<span data-ttu-id="03e54-142">Importante</span><span class="sxs-lookup"><span data-stu-id="03e54-142">Important</span></span>**  
   <span data-ttu-id="03e54-143">Debe colocar el archivo FSD en una ubicación con la capacidad de respuesta y la confiabilidad equivalente al rendimiento de almacenamiento conectado localmente, por ejemplo, un SAN.</span><span class="sxs-lookup"><span data-stu-id="03e54-143">You must put the FSD file in a location that has the responsiveness and reliability equivalent to locally attached storage performance, for example, a SAN.</span></span>

     

6. <span data-ttu-id="03e54-144">Instale el cliente de escritorio de App-V en la imagen de VM maestra de VDI y, a continuación, configúrelo para usar la caché de solo lectura agregando los siguientes valores de clave de registro a la clave AppFS en el cliente.</span><span class="sxs-lookup"><span data-stu-id="03e54-144">Install the App-V Desktop Client on the VDI Master VM Image, and then configure it to use the read-only cache by adding the following registry key values to the AppFS key on the client.</span></span> <span data-ttu-id="03e54-145">La clave AppFS se encuentra en HKEY \ _LOCAL \ _MACHINE \\SOFTWARE\\\ [Wow6432Node\\\] Microsoft\\SoftGrid\\4.5\\Client\\AppFS.</span><span class="sxs-lookup"><span data-stu-id="03e54-145">The AppFS key is located at HKEY\_LOCAL\_MACHINE\\SOFTWARE\\\[Wow6432Node\\\]Microsoft\\SoftGrid\\4.5\\Client\\AppFS.</span></span>

   <table>
   <colgroup>
   <col width="25%" />
   <col width="25%" />
   <col width="25%" />
   <col width="25%" />
   </colgroup>
   <thead>
   <tr class="header">
   <th align="left"><span data-ttu-id="03e54-146">Tecla</span><span class="sxs-lookup"><span data-stu-id="03e54-146">Key</span></span></th>
   <th align="left"><span data-ttu-id="03e54-147">Tipo</span><span class="sxs-lookup"><span data-stu-id="03e54-147">Type</span></span></th>
   <th align="left"><span data-ttu-id="03e54-148">Valor</span><span class="sxs-lookup"><span data-stu-id="03e54-148">Value</span></span></th>
   <th align="left"><span data-ttu-id="03e54-149">Propósito</span><span class="sxs-lookup"><span data-stu-id="03e54-149">Purpose</span></span></th>
   </tr>
   </thead>
   <tbody>
   <tr class="odd">
   <td align="left"><p><span data-ttu-id="03e54-150">FileName</span><span class="sxs-lookup"><span data-stu-id="03e54-150">FileName</span></span></p></td>
   <td align="left"><p><span data-ttu-id="03e54-151">Cadena</span><span class="sxs-lookup"><span data-stu-id="03e54-151">String</span></span></p></td>
   <td align="left"><p><span data-ttu-id="03e54-152">Ruta de acceso a FSD</span><span class="sxs-lookup"><span data-stu-id="03e54-152">path to FSD</span></span></p></td>
   <td align="left"><p><span data-ttu-id="03e54-153">Especifica la ruta de acceso al archivo de caché compartido, por ejemplo, \VDIServername\Sharefolder\SFTFS. FSD (obligatorio).</span><span class="sxs-lookup"><span data-stu-id="03e54-153">Specifies the path to the shared cache file, for example, \VDIServername\Sharefolder\SFTFS.FSD (Required).</span></span></p></td>
   </tr>
   <tr class="even">
   <td align="left"><p><span data-ttu-id="03e54-154">ReadOnlyFSD</span><span class="sxs-lookup"><span data-stu-id="03e54-154">ReadOnlyFSD</span></span></p></td>
   <td align="left"><p><span data-ttu-id="03e54-155">DWORD</span><span class="sxs-lookup"><span data-stu-id="03e54-155">DWORD</span></span></p></td>
   <td align="left"><p><span data-ttu-id="03e54-156">uno</span><span class="sxs-lookup"><span data-stu-id="03e54-156">1</span></span></p></td>
   <td align="left"><p><span data-ttu-id="03e54-157">Configura el cliente para que funcione en modo de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="03e54-157">Configures the client to operate in Read-Only mode.</span></span> <span data-ttu-id="03e54-158">Esto garantiza que el cliente no intentará transmitir las actualizaciones a la caché del paquete.</span><span class="sxs-lookup"><span data-stu-id="03e54-158">This ensures that the client will not attempt to stream updates to the package cache.</span></span> <span data-ttu-id="03e54-159">(Necesario)</span><span class="sxs-lookup"><span data-stu-id="03e54-159">(Required)</span></span></p></td>
   </tr>
   <tr class="odd">
   <td align="left"><p><span data-ttu-id="03e54-160">ErrorLogLocation</span><span class="sxs-lookup"><span data-stu-id="03e54-160">ErrorLogLocation</span></span></p></td>
   <td align="left"><p><span data-ttu-id="03e54-161">Cadena</span><span class="sxs-lookup"><span data-stu-id="03e54-161">String</span></span></p></td>
   <td align="left"><p><span data-ttu-id="03e54-162">Ruta de acceso al archivo de registro de errores (. ETL)</span><span class="sxs-lookup"><span data-stu-id="03e54-162">path to error log (.etl) file</span></span></p></td>
   <td align="left"><p><span data-ttu-id="03e54-163">Entrada usada para especificar la ruta de acceso al registro de errores.</span><span class="sxs-lookup"><span data-stu-id="03e54-163">Entry used to specify the path to the error log.</span></span> <span data-ttu-id="03e54-164">Práctica.</span><span class="sxs-lookup"><span data-stu-id="03e54-164">(Recommended.</span></span> <span data-ttu-id="03e54-165">Use una ruta local, como C:\Logs\Sftfs.etl).</span><span class="sxs-lookup"><span data-stu-id="03e54-165">Use a local path such as C:\Logs\Sftfs.etl).</span></span></p></td>
   </tr>
   </tbody>
   </table>

     

7. <span data-ttu-id="03e54-166">Configure el cliente de imagen de VM maestro para usar el servidor de publicación y para usar la actualización de publicación al iniciar sesión.</span><span class="sxs-lookup"><span data-stu-id="03e54-166">Configure the Master VM Image client to use the publishing server and to use publishing refresh at logon.</span></span> <span data-ttu-id="03e54-167">A medida que los usuarios inician sesión en el sistema VDI y su VM se crea a partir de la imagen de VM maestra, se produce un ciclo de actualización de publicación y se publican todas las aplicaciones para las que su cuenta está autorizada.</span><span class="sxs-lookup"><span data-stu-id="03e54-167">As users log on to the VDI system and their VM is built from the Master VM Image, a publishing refresh cycle occurs and publishes all the applications for which their account is authorized.</span></span> <span data-ttu-id="03e54-168">Estas aplicaciones se ejecutan desde la memoria caché compartida.</span><span class="sxs-lookup"><span data-stu-id="03e54-168">These applications are run from the shared cache.</span></span>

**<span data-ttu-id="03e54-169">Para configurar el cliente para la actualización de paquetes en un escenario de VM agrupada</span><span class="sxs-lookup"><span data-stu-id="03e54-169">To configure the client for package upgrade in a Pooled VM scenario</span></span>**

1.  <span data-ttu-id="03e54-170">Complete la actualización y las pruebas del paquete de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="03e54-170">Complete the upgrade and testing of the application package.</span></span>

2.  <span data-ttu-id="03e54-171">Actualice el paquete en el servidor de App-V.</span><span class="sxs-lookup"><span data-stu-id="03e54-171">Upgrade the package on the App-V server.</span></span> <span data-ttu-id="03e54-172">A continuación, publique y transmita la nueva versión de las aplicaciones al cliente en el equipo de ensayo para que se carguen por completo en la caché.</span><span class="sxs-lookup"><span data-stu-id="03e54-172">Then, publish and stream the new version of the applications to the client on the staging computer so that they are fully loaded into cache.</span></span>

3.  <span data-ttu-id="03e54-173">Reinicie el equipo de ensayo en modo seguro para asegurarse de que los drivers no se han iniciado.</span><span class="sxs-lookup"><span data-stu-id="03e54-173">Restart the staging computer in Safe Mode to ensure the drivers are not started.</span></span>

    <span data-ttu-id="03e54-174">**Nota:**  Como alternativa, puede detener y deshabilitar el servicio de virtualización de aplicaciones en Services. msc y, a continuación, reiniciar el equipo.</span><span class="sxs-lookup"><span data-stu-id="03e54-174">**Note** Alternatively, you can stop and disable the Application Virtualization service in the Services.msc, and then restart the computer.</span></span> <span data-ttu-id="03e54-175">Una vez que se haya copiado el archivo, recuerde habilitar e iniciar el servicio.</span><span class="sxs-lookup"><span data-stu-id="03e54-175">After the file has been copied, remember to enable and start the service again.</span></span>

     

4.  <span data-ttu-id="03e54-176">Copie el archivo de la caché Sftfs. FSD en la red SAN del servidor VDI, donde todas las VM pueden tener acceso a ella, como en una carpeta compartida.</span><span class="sxs-lookup"><span data-stu-id="03e54-176">Copy the Sftfs.fsd cache file to the VDI server’s SAN where all the VMs can access it, such as in a shared folder.</span></span> <span data-ttu-id="03e54-177">Puede usar un nombre de archivo diferente, por ejemplo, SFTFS \ _V2. FSD, para distinguir la nueva versión.</span><span class="sxs-lookup"><span data-stu-id="03e54-177">You can use a different filename, for example, SFTFS\_V2.FSD, to distinguish the new version.</span></span>

5.  <span data-ttu-id="03e54-178">Para configurar el cliente de escritorio de App-V en la imagen de VM maestra de VDI para usar el archivo de caché compartido actualizado, cambie el valor de nombre de archivo de la clave de registro AppFS para que apunte a la ubicación del archivo actualizado, por ejemplo, \\\\VDIServername\\Sharefolder\\SFTFS\ _V2. FSD.</span><span class="sxs-lookup"><span data-stu-id="03e54-178">To configure the App-V Desktop Client on the VDI Master VM Image to use the updated shared cache file, change the AppFS registry key FILENAME value to point to the location of the updated file, for example, \\\\VDIServername\\Sharefolder\\SFTFS\_V2.FSD.</span></span> <span data-ttu-id="03e54-179">Cuando los usuarios cierran sesión e inician sesión de nuevo, se crea una nueva máquina virtual para ellos con la imagen principal actualizada.</span><span class="sxs-lookup"><span data-stu-id="03e54-179">When users log off and then log on again, a new VM is created for them by using the updated Master Image.</span></span> <span data-ttu-id="03e54-180">Toda la configuración de usuario se conservará y se aplicará a la nueva máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="03e54-180">All their user settings will be retained and applied to the new VM.</span></span> <span data-ttu-id="03e54-181">Entonces tienen acceso a las aplicaciones actualizadas.</span><span class="sxs-lookup"><span data-stu-id="03e54-181">Then they have access to the updated applications.</span></span>

**<span data-ttu-id="03e54-182">Para configurar el cliente para la actualización de paquetes en un escenario de VM estática</span><span class="sxs-lookup"><span data-stu-id="03e54-182">To configure the client for package upgrade in a Static VM scenario</span></span>**

1.  <span data-ttu-id="03e54-183">Complete la actualización y las pruebas del paquete de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="03e54-183">Complete the upgrade and testing of the application package.</span></span>

2.  <span data-ttu-id="03e54-184">Actualice el paquete en el servidor de App-V.</span><span class="sxs-lookup"><span data-stu-id="03e54-184">Upgrade the package on the App-V server.</span></span> <span data-ttu-id="03e54-185">Después, publique y transmita la nueva versión de las aplicaciones al cliente en el equipo de ensayo para que las aplicaciones se carguen por completo en la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="03e54-185">Then, publish and stream the new version of the applications to the client on the staging computer so that the applications are fully loaded into cache.</span></span>

3.  <span data-ttu-id="03e54-186">Reinicie el equipo de ensayo en modo seguro para asegurarse de que los drivers no se han iniciado.</span><span class="sxs-lookup"><span data-stu-id="03e54-186">Restart the staging computer in Safe Mode to ensure that the drivers are not started.</span></span>

    <span data-ttu-id="03e54-187">**Nota:**  Como alternativa, puede detener y deshabilitar el servicio de virtualización de aplicaciones en Services. msc y, a continuación, reiniciar el equipo.</span><span class="sxs-lookup"><span data-stu-id="03e54-187">**Note** Alternatively, you can stop and disable the Application Virtualization service in the Services.msc, and then restart the computer.</span></span> <span data-ttu-id="03e54-188">Una vez que se haya copiado el archivo, recuerde habilitar e iniciar el servicio.</span><span class="sxs-lookup"><span data-stu-id="03e54-188">After the file has been copied, remember to enable and start the service again.</span></span>

     

4.  <span data-ttu-id="03e54-189">Copie el archivo de la caché Sftfs. FSD en la red SAN del servidor VDI, donde todas las VM pueden tener acceso a ella, como en una carpeta compartida.</span><span class="sxs-lookup"><span data-stu-id="03e54-189">Copy the Sftfs.fsd cache file to the VDI server’s SAN where all the VMs can access it, such as in a shared folder.</span></span> <span data-ttu-id="03e54-190">Puede usar un nombre de archivo diferente, por ejemplo, SFTFS \ _V2. FSD, para distinguir la nueva versión.</span><span class="sxs-lookup"><span data-stu-id="03e54-190">You can use a different filename, for example, SFTFS\_V2.FSD, to distinguish the new version.</span></span>

5.  <span data-ttu-id="03e54-191">Para configurar el cliente de escritorio de App-V en la imagen de VM maestra de VDI para usar el archivo de caché compartido actualizado, cambie el valor de nombre de archivo de la clave de registro AppFS para que apunte a la ubicación del archivo actualizado, por ejemplo, \\\\VDIServername\\Sharefolder\\SFTFS\ _V2. FSD.</span><span class="sxs-lookup"><span data-stu-id="03e54-191">To configure the App-V Desktop Client on the VDI Master VM Image to use the updated shared cache file, change the AppFS registry key FILENAME value to point to the location of the updated file, for example, \\\\VDIServername\\Sharefolder\\SFTFS\_V2.FSD.</span></span> <span data-ttu-id="03e54-192">Esto garantiza que los nuevos usuarios reciban la nueva versión.</span><span class="sxs-lookup"><span data-stu-id="03e54-192">This ensures that new users get the new version.</span></span>

6.  <span data-ttu-id="03e54-193">Cree un script que edite el valor del nombre de archivo de la clave AppFS para establecerlo en la ubicación de la caché actualizada, por ejemplo, \\\\VDIServername\\Sharefolder\\SFTFS\ _V2. FSD.</span><span class="sxs-lookup"><span data-stu-id="03e54-193">Create a script that edits the AppFS key FILENAME value to set it to the location of the updated cache, for example, \\\\VDIServername\\Sharefolder\\SFTFS\_V2.FSD.</span></span> <span data-ttu-id="03e54-194">Configure este script para que se ejecute cuando el usuario cierre sesión o inicie sesión para que se ejecute antes de que se inicien los controladores del cliente de App-V, por ejemplo, con la configuración de directiva de grupo.</span><span class="sxs-lookup"><span data-stu-id="03e54-194">Configure this script to run when the user logs off or logs on so that it runs before the App-V client drivers start, for example, by using Group Policy settings.</span></span> <span data-ttu-id="03e54-195">Cuando los usuarios cierran la sesión e inician sesión de nuevo, su VM actual se actualiza y usarán la copia actualizada de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="03e54-195">When users log off and log on again, their existing VM is updated, and they will use the updated copy of the cache.</span></span> <span data-ttu-id="03e54-196">A continuación, tienen acceso a las aplicaciones actualizadas.</span><span class="sxs-lookup"><span data-stu-id="03e54-196">Then, they have access to the updated applications.</span></span>

## <span data-ttu-id="03e54-197">Cómo usar vínculos simbólicos al actualizar la caché</span><span class="sxs-lookup"><span data-stu-id="03e54-197">How to Use Symbolic Links when Upgrading the Cache</span></span>


<span data-ttu-id="03e54-198">En lugar de modificar el valor nombre de archivo de la clave AppFS cada vez que se implementa un nuevo archivo de caché que contiene paquetes nuevos o actualizados, puede usar un vínculo simbólico en los siguientes sistemas operativos: Windows Vista, Windows 7 y Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="03e54-198">Instead of modifying the AppFS key FILENAME value every time that a new cache file is deployed that contains new or upgraded packages, you can use a symbolic link in the following operating systems: Windows Vista, Windows 7, and Windows Server 2008.</span></span> <span data-ttu-id="03e54-199">Para obtener más información sobre los vínculos simbólicos, consulte [vínculos simbólicos](https://go.microsoft.com/fwlink/?LinkId=157626) ( https://go.microsoft.com/fwlink/?LinkId=157626) .</span><span class="sxs-lookup"><span data-stu-id="03e54-199">For more information about symbolic links, see [Symbolic Links](https://go.microsoft.com/fwlink/?LinkId=157626) (https://go.microsoft.com/fwlink/?LinkId=157626).</span></span> <span data-ttu-id="03e54-200">Por el contrario, Windows XP no admite el uso de vínculos simbólicos y, en su lugar, debe usar puntos de Unión.</span><span class="sxs-lookup"><span data-stu-id="03e54-200">In contrast, Windows XP does not support the use of symbolic links, and you must use junction points instead.</span></span> <span data-ttu-id="03e54-201">Para obtener más información acerca de las uniones, consulte el [artículo 205524](https://go.microsoft.com/fwlink/?LinkId=182553) en Microsoft Knowledge base ( https://go.microsoft.com/fwlink/?LinkId=182553) y también la herramienta Unión de la versión [v 1.05](https://go.microsoft.com/fwlink/?LinkId=182554) ( https://go.microsoft.com/fwlink/?LinkId=182554) .</span><span class="sxs-lookup"><span data-stu-id="03e54-201">For more information about junctions, see [article 205524](https://go.microsoft.com/fwlink/?LinkId=182553) in the Microsoft Knowledge Base (https://go.microsoft.com/fwlink/?LinkId=182553), and also the tool [Junction v1.05](https://go.microsoft.com/fwlink/?LinkId=182554) (https://go.microsoft.com/fwlink/?LinkId=182554).</span></span>

**<span data-ttu-id="03e54-202">Para configurar un vínculo simbólico para que haga referencia a la caché</span><span class="sxs-lookup"><span data-stu-id="03e54-202">To configure a symbolic link to reference the cache</span></span>**

1.  <span data-ttu-id="03e54-203">Durante la fase de implementación inicial, abra una ventana del símbolo del sistema como administrador local en el sistema operativo host del servidor VDI.</span><span class="sxs-lookup"><span data-stu-id="03e54-203">During the initial deployment stage, open a Command Prompt window as a local administrator on the VDI server host operating system.</span></span>

2.  <span data-ttu-id="03e54-204">Cree un vínculo simbólico mediante el comando MKLINK y, a continuación, configúrelo para que apunte al archivo Sftfs. FSD.</span><span class="sxs-lookup"><span data-stu-id="03e54-204">Create a symbolic link by using the MKLINK command, and then configure it to point to the Sftfs.fsd file.</span></span>

    **     <span data-ttu-id="03e54-205">mklink symlinkname \\\\vdihostserver\\sharefolder\\sftfs.fsd</span><span class="sxs-lookup"><span data-stu-id="03e54-205">mklink symlinkname \\\\vdihostserver\\sharefolder\\sftfs.fsd</span></span>**

3.  <span data-ttu-id="03e54-206">En la imagen de VM maestra de VDI, abra una ventana del símbolo del sistema con la opción **Ejecutar como administrador** y otorgue permisos de vínculos remotos para que la máquina virtual pueda acceder al vínculo simbólico en el sistema operativo host de VDI.</span><span class="sxs-lookup"><span data-stu-id="03e54-206">On the VDI Master VM Image, open a Command Prompt window by using the **Run as administrator** option and grant remote link permissions so that the VM can access the symbolic link on the VDI Host operating system.</span></span> <span data-ttu-id="03e54-207">De forma predeterminada, los permisos de vínculos remotos están deshabilitados.</span><span class="sxs-lookup"><span data-stu-id="03e54-207">By default, remote link permissions are disabled.</span></span>

    **<span data-ttu-id="03e54-208">fsutil Behavior Set SymlinkEvaluation R2R: 1</span><span class="sxs-lookup"><span data-stu-id="03e54-208">fsutil behavior set SymlinkEvaluation R2R:1</span></span>**

    <span data-ttu-id="03e54-209">**Nota:**  En el servidor de almacenamiento, los permisos de vínculo apropiados deben estar habilitados.</span><span class="sxs-lookup"><span data-stu-id="03e54-209">**Note** On the storage server, appropriate link permissions must be enabled.</span></span> <span data-ttu-id="03e54-210">Según la ubicación del vínculo y el archivo Sftfs. FSD, los permisos son **L2L: 1** o **L2R: 1** o **R2L: 1** o **R2R: 1**.</span><span class="sxs-lookup"><span data-stu-id="03e54-210">Depending on the location of link and the Sftfs.fsd file, the permissions are **L2L:1** or **L2R:1** or **R2L:1** or **R2R:1**.</span></span>

     

4.  <span data-ttu-id="03e54-211">Al configurar el cliente de escritorio de App-V en la imagen de VM maestra de VDI, establezca el valor de nombre de archivo de la clave AppFS igual a la ruta de acceso UNC del archivo FSD que usa el vínculo simbólico; por ejemplo, establézcalo en \\\\VDIHostserver\\Symlinkname.</span><span class="sxs-lookup"><span data-stu-id="03e54-211">When you configure the App-V Desktop Client on the VDI Master VM Image, set the AppFS key FILENAME value equal to the UNC path of the FSD file that is using the symbolic link; for example, set it to \\\\VDIHostserver\\Symlinkname.</span></span> <span data-ttu-id="03e54-212">Cuando el cliente de App-V accede por primera vez a la caché, el vínculo simbólico pasa al cliente un identificador para el archivo de la caché.</span><span class="sxs-lookup"><span data-stu-id="03e54-212">When the App-V client first accesses the cache, the symbolic link passes to the client a handle to the cache file.</span></span> <span data-ttu-id="03e54-213">El cliente continúa usando ese identificador siempre que se esté ejecutando el cliente.</span><span class="sxs-lookup"><span data-stu-id="03e54-213">The client continues to use that handle as long as the client is running.</span></span> <span data-ttu-id="03e54-214">El valor del vínculo simbólico puede actualizarse de forma segura incluso si los clientes existentes tienen la caché compartida antigua abierta.</span><span class="sxs-lookup"><span data-stu-id="03e54-214">The value of the symbolic link can safely be updated even if existing clients have the old shared cache open.</span></span>

5.  <span data-ttu-id="03e54-215">Cuando tenga que actualizar un paquete o agregar un nuevo paquete a la caché, siga los pasos 1 a 5 del procedimiento de actualización para el escenario de la VM estática o de la VM agrupada.</span><span class="sxs-lookup"><span data-stu-id="03e54-215">When you must upgrade a package or to add a new package to the cache, follow steps 1 through 5 of the upgrade procedure for either the Static VM or Pooled VM scenario.</span></span> <span data-ttu-id="03e54-216">A continuación, elimine el vínculo simbólico y vuelva a crearlo para que apunte a la nueva versión del archivo de caché compartido.</span><span class="sxs-lookup"><span data-stu-id="03e54-216">Then, delete the symbolic link and re-create it to point to the new version of the shared cache file.</span></span> <span data-ttu-id="03e54-217">Cuando se reinicia la VM, el cliente recibe un identificador de la copia actualizada de la caché porque la VM usa la ruta de acceso que contiene el vínculo simbólico actualizado.</span><span class="sxs-lookup"><span data-stu-id="03e54-217">When the VM is restarted, the client receives a handle to the updated copy of the cache because the VM uses the path that contains the updated symbolic link.</span></span> <span data-ttu-id="03e54-218">A continuación, los usuarios tienen acceso a las aplicaciones nuevas y actualizadas.</span><span class="sxs-lookup"><span data-stu-id="03e54-218">Then, the users have access to the new and updated applications.</span></span>

## <span data-ttu-id="03e54-219">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="03e54-219">Related topics</span></span>


[<span data-ttu-id="03e54-220">Cómo instalar el servidor de administración de virtualización de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="03e54-220">How to Install Application Virtualization Management Server</span></span>](how-to-install-application-virtualization-management-server.md)

[<span data-ttu-id="03e54-221">Cómo instalar manualmente el cliente de virtualización de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="03e54-221">How to Manually Install the Application Virtualization Client</span></span>](how-to-manually-install-the-application-virtualization-client.md)

[<span data-ttu-id="03e54-222">Cómo instalar el cliente mediante el uso de la línea de comandos</span><span class="sxs-lookup"><span data-stu-id="03e54-222">How to Install the Client by Using the Command Line</span></span>](how-to-install-the-client-by-using-the-command-line-new.md)

 

 





